<?xml version="1.0"?>
<?xml-stylesheet href="chrome://global/skin/" type="text/css"?>
<?xml-stylesheet href="chrome://messenger/skin/input-fields.css" type="text/css"?>
<?xml-stylesheet href="chrome://messenger/skin/messenger.css" type="text/css"?>
<?xml-stylesheet href="chrome://global/skin/global.css" type="text/css"?>
<?xml-stylesheet href="chrome://messenger/skin/dialogs.css" type="text/css"?>
<?xml-stylesheet href="resource://subjects_prefix_switch/options.css" type="text/css" ?>
<?xml-stylesheet href="resource://subjects_prefix_switch/subjects_prefix_switch.css" type="text/css" ?>

<!DOCTYPE dialog>

<dialog
	id="subjects_prefix_switchoptions"
	type="child"
	buttons="accept,cancel"
    xmlns="http://www.mozilla.org/keymaster/gatekeeper/there.is.only.xul"
    xmlns:html="http://www.w3.org/1999/xhtml"
	onload="com.ktsystems.subswitch.OptionsPanel.optionsOnLoad();"
    style="padding: 0px 0px 5px 0px; height: 500px; width: 480px;"
	persist="width height screenX screenY sizemode"
	title="__MSG_subjects_prefix_switch.label.options.windowtitle__">

    <script src="chrome://global/content/preferencesBindings.js" type="application/javascript"/>
	<script type="application/x-javascript" src="chrome://subjects_prefix_switch/content/const.js"/>
    <script type="application/x-javascript" src="chrome://subjects_prefix_switch/content/utils.js"/>
    <script type="application/x-javascript" src="chrome://subjects_prefix_switch/content/items.js"/>
    <script type="application/x-javascript" src="chrome://subjects_prefix_switch/content/options.js"/>

	<script type="application/javascript" src="chrome://subjects_prefix_switch/content/preferences.js"/>

    <tabbox>
		<tabs>
		  <tab id="maintab" label="__MSG_subjects_prefix_switch.label.options.maintab__"/>
		  <tab id="othertab" label="__MSG_subjects_prefix_switch.label.options.othertab__"/>
		  <tab id="helptab" label="__MSG_subjects_prefix_switch.label.options.helptab__" />
		</tabs>

		<tabpanels flex="1" orient="vertical">
		  <tabpanel id="maintabpanel" flex="1" orient="vertical">
				<vbox>
					<fieldset>
						<groupbox orient="vertical" align="stretch" flex="1" >
						<hbox><legend class="insideTab">__MSG_subjects_prefix_switch.label.options.tree.rds__</legend></hbox>
						<vbox>
								<hbox flex="1">
								<tree id="subjects_prefix_switchTree" align="stretch" flex="1" rows="8"
									onselect="return com.ktsystems.subswitch.OptionsPanel.onSelectItem();"
										ondblclick="return com.ktsystems.subswitch.OptionsPanel.editItem();">
									<treecols>
										<treecol id="default" label="__MSG_subjects_prefix_switch.label.options.tree.default__" persist="width" cycler="true"/>
										<splitter class="tree-splitter"/>
										<treecol id="description" label="__MSG_subjects_prefix_switch.label.options.tree.description__" flex="1" persist="width"/>
										<splitter class="tree-splitter"/>
										<treecol id="rd" label="__MSG_subjects_prefix_switch.label.options.tree.rd__" flex="1" persist="width"/>
										<splitter class="tree-splitter"/>
										<treecol id="showInNewMsgPopup" label="__MSG_subjects_prefix_switch.label.options.tree.showInNewMsgPopup__" persist="width" cycler="true"/>
										<splitter class="tree-splitter"/>
										<treecol id="aliases" label="__MSG_subjects_prefix_switch.label.setrd.aliases__" flex="1" persist="width"  />
									</treecols>
									<treechildren/>
								</tree>
								<vbox>
									<button class="new optionsButton"
											label="__MSG_subjects_prefix_switch.label.options.button.new__"
											id="new"
											oncommand="return com.ktsystems.subswitch.OptionsPanel.newItem();"/>
									<button class="edit optionsButton"
											label="__MSG_subjects_prefix_switch.label.options.button.edit__"
											id="edit"
											oncommand="return com.ktsystems.subswitch.OptionsPanel.editItem();"/>
									<button class="delete optionsButton"
											label="__MSG_subjects_prefix_switch.label.options.button.delete__"
											id="delete"
											oncommand="return com.ktsystems.subswitch.OptionsPanel.deleteItem();"/>
									<button class="duplicate optionsButton"
											label="__MSG_subjects_prefix_switch.label.options.button.duplicate__"
											id="duplicate"
											oncommand="return com.ktsystems.subswitch.OptionsPanel.duplicateItem();"/>
									<hbox>
										<button class="up"
												id="up"
												oncommand="return com.ktsystems.subswitch.OptionsPanel.moveItem(true);"/>
										<spacer flex="1"/>
										<button class="down"
												id="down"
												oncommand="return com.ktsystems.subswitch.OptionsPanel.moveItem(false);"/>
									</hbox>
									<spacer flex="1"/>
								</vbox>
							</hbox>
						</vbox>
				</groupbox>
					</fieldset>
				<checkbox id="offbydefault" label="__MSG_subjects_prefix_switch.label.options.offbydefault__" prefstring="offbydefault" defaultpref="false"/>
				<checkbox id="beforeMsgSubject" label="__MSG_subjects_prefix_switch.label.options.msgSubject__" prefstring="beforeMsgSubject" defaultpref="true"/>
				<checkbox id="contextmenu" label="__MSG_subjects_prefix_switch.label.options.contextmenu__" prefstring="contextmenu" defaultpref="true"/>
				<html:input id="initdelay" prefstring="extensions.subjects_prefix_switch.initdelay" defaultpref="1000" hidden="true"/>
			</vbox>
			</tabpanel>
		  	<tabpanel id="othertabpanel">
				<hbox flex="1">
					<vbox flex="1">
						<fieldset>
							<vbox>
								<vbox>
									<hbox><legend class="insideTab">__MSG_subjects_prefix_switch.label.options.other.autodiscovery__</legend></hbox>

									<checkbox id="addRDtoEmail" label="__MSG_subjects_prefix_switch.label.options.addRDtoEmail__" prefstring="addRDtoEmail" defaultpref="true"/>
									<checkbox id="loadRDfromEmail" label="__MSG_subjects_prefix_switch.label.options.loadRDfromEmail__" prefstring="loadRDfromEmail" defaultpref="true"/>
									<spacer flex="1"/>
									<spacer flex="1"/>
									<html:table>
										<html:tr>
											<html:td width="150">
												<description>__MSG_subjects_prefix_switch.label.options.discoveryIgnoreSigns__</description>
											</html:td>
											<html:td>
												<hbox class="input-container">
													<html:input align="center" id="discoveryIgnoreSigns" prefstring="discoveryIgnoreSigns" defaultpref="[]\/ "/>
												</hbox>
											</html:td>
										</html:tr>
										<html:tr>
											<html:td width="150">
												<description width="300">__MSG_subjects_prefix_switch.label.options.discoveryItemRegex__</description>
											</html:td>
											<html:td>
												<hbox class="input-container">
													<html:input align="center" id="discoveryItemPattern" prefstring="discoveryItemPattern" defaultpref="\[.+\]"/>
												</hbox>
											</html:td>
										</html:tr>
									</html:table>
								</vbox>
								<description width="200" style="margin-bottom:10px;">__MSG_subjects_prefix_switch.label.options.discovery.autodisable.description__</description>
								<hbox align="top">
									<html:table>
										<html:tr>
											<html:td>
												<hbox align="center">
													<label value="__MSG_subjects_prefix_switch.label.options.discovery.autodisable.description.address__"/>
													<html:input id="address" size="10"/>
												</hbox>
											</html:td>
											<html:td>
												<vbox>
													<button id="addAddress" class="addAddress optionsButton" label="__MSG_subjects_prefix_switch.label.options.discovery.autodisable.description.add__" oncommand="com.ktsystems.subswitch.OptionsPanel.addAutoSwitch('address');"/>
													<button id="removeAddress"  class="removeAddress optionsButton" label="__MSG_subjects_prefix_switch.label.options.discovery.autodisable.description.remove__" oncommand="com.ktsystems.subswitch.OptionsPanel.removeAutoswitch('address');"/>
												</vbox>
											</html:td>

										</html:tr>

									</html:table>
									<hbox><vbox><richlistbox id="discoveryIgnoreList" prefstring="discoveryIgnoreList" defaultpref="-" seltype="single" flex="1" rows="3"/></vbox></hbox>
								</hbox>
								<description style="margin-top:10px;margin-bottom:10px;">__MSG_subjects_prefix_switch.label.options.discovery.autodisable.description.wildcard1__</description>
							</vbox>
						</fieldset>
						<fieldset>
							<vbox>
								<hbox><legend class="insideTab">__MSG_subjects_prefix_switch.label.options.other.impexp__</legend></hbox>
								<vbox align="center">
									<hbox>
										<button class="browse optionsButton" id="button-composer-pick" oncommand="return com.ktsystems.subswitch.OptionsPanel.onImportPressed();"
												label="__MSG_subjects_prefix_switch.label.options.other.imp__" />
										<button class="browse optionsButton" id="button-composer-pick" oncommand="return com.ktsystems.subswitch.OptionsPanel.onExportPressed();"
												label="__MSG_subjects_prefix_switch.label.options.other.exp__" />
									</hbox>
								</vbox>
								<hbox id="ssMsg-notification">
									<!-- notificationbox will be added here lazily. -->
								</hbox>

							</vbox>
						</fieldset>
					</vbox>
				</hbox>
		  </tabpanel>
		  <tabpanel id="helptabpanel">
			  <vbox flex="1">
					<hbox>
						<image src="resource://subjects_prefix_switch/sub_switch232.png" class="optionsImage" />
						<spacer width="15"/>
						<description value="SubSwitch" style="font-weight: bold; font-size: x-large;"/>
					</hbox>

					<description value="Version {appversion}"/>
					<description value="Build {appversion} ({distDate})" style="font-size: 10px; color: #666666;"/>

					<separator class="thin"/>

					<hbox>
				  		<description value="__MSG_subjects_prefix_switch.label.options.createdBy__" style="font-weight: bold;"/>
						<label value="{auther} / {contactToEmail}" class="text-link" onclick="com.ktsystems.subswitch.Utils.openMailURL('mailto:{contactToEmail}');"/>
					</hbox>

					<separator class="thin"/>

					<description style="margin-top:10px; font-weight: bold;">__MSG_subjects_prefix_switch.label.options.website__</description>
					<label id="website" class="text-link" onclick="com.ktsystems.subswitch.Utils.openURL('{issuesSite}');" style="margin-left:25px;" value="{issuesSite}"/>

					<separator class="thin"/>

					<description style="margin-top:10px; font-weight: bold;">__MSG_subjects_prefix_switch.label.options.translate__</description>
					<label id="website" class="text-link" onclick="com.ktsystems.subswitch.Utils.openURL('{issuesSite}');" style="margin-left:25px;" value="{issuesSite}"/>

					<separator class="thin"/>

					<description style="margin-top:10px; font-weight: bold;">__MSG_subjects_prefix_switch.label.options.settings.support__</description>
					<hbox align="left">
					<image src="resource://subjects_prefix_switch/btn_donate_SM.gif"
						id="donateButton" href="" class="text-link"
						style="margin-left:25px;"
						onclick="com.ktsystems.subswitch.Utils.openURL('https://www.paypal.com/cgi-bin/webscr?cmd=_s-xclick&amp;hosted_button_id=3ZHGJ9QSHRZNW');" />
					</hbox>
				</vbox>
		  </tabpanel>
		</tabpanels>
    </tabbox>

</dialog>
